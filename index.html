<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>카나시미의 공간</title>
    <style>
        body {
            margin: 0; padding: 0;
            background-color: #0d0d0d; color: #ffffff;
            font-family: 'Malgun Gothic', sans-serif;
            display: flex; 
            min-height: 100vh;
        }

        /* 메인 콘텐츠 영역 */
        .main-wrapper {
            flex: 1;
            display: flex; flex-direction: column; align-items: center;
            padding-right: 300px; /* 오른쪽 사이드바 공간 확보 */
            box-sizing: border-box;
        }

        .banner-clip {
            width: 100%; height: 380px; overflow: hidden; 
            display: flex; justify-content: center;
            border-bottom: 2px solid #222;
        }

        .banner-clip img {
            width: 100%; height: 100%; object-fit: cover; object-position: top;
        }

        .container {
            max-width: 800px; width: 100%; padding: 40px 20px; 
            text-align: center; 
        }

        .status-box { margin-bottom: 50px; padding: 20px; }
        .status-text { color: #666; font-size: 0.9rem; margin-bottom: 20px; letter-spacing: 1px; }

        .btn-group { display: flex; gap: 10px; justify-content: center; }

        .smoke-btn, .toggle-diary-btn {
            background-color: transparent; border: 1px solid #444; 
            padding: 10px 30px; border-radius: 4px; cursor: pointer; 
            font-weight: bold; transition: 0.3s;
        }
        .smoke-btn { color: #ff4444; }
        .smoke-btn:hover { background-color: #1a1a1a; border-color: #ff4444; }
        
        .toggle-diary-btn { color: #aaa; }
        .toggle-diary-btn:hover { background-color: #1a1a1a; color: #fff; border-color: #888; }

        /* 일기 작성란 스타일 (기본적으로 숨김 처리) */
        .diary-write-card {
            display: none; /* 처음에 보이지 않게 함 */
            background: #151515; border: 1px solid #222;
            padding: 25px; border-radius: 8px; margin: 30px 0;
            text-align: left;
        }
        #diaryTitle, #diaryContent {
            width: 100%; background: #0a0a0a; border: 1px solid #333;
            color: #fff; padding: 12px; margin-bottom: 12px;
            box-sizing: border-box; font-family: inherit;
        }
        #diaryContent { height: 120px; resize: none; }
        .save-btn {
            background: #222; color: #ff4444; border: 1px solid #444;
            padding: 10px 25px; cursor: pointer; font-weight: bold; transition: 0.3s;
        }
        .save-btn:hover { background: #ff4444; color: #fff; }

        .memo-content {
            margin-top: 40px; white-space: pre-wrap; font-size: 1.25rem;
            line-height: 2.8; color: #d1d1d1; word-break: keep-all;
            display: inline-block; text-align: center;
        }

        /* 오른쪽 사이드바 스타일 */
        .sidebar {
            width: 300px; height: 100vh; background-color: #080808;
            position: fixed; right: 0; top: 0;
            border-left: 1px solid #222; padding: 25px;
            box-sizing: border-box; overflow-y: auto;
        }
        .sidebar h3 { 
            font-size: 1.1rem; color: #efefef; border-bottom: 1px solid #333;
            padding-bottom: 15px; margin-top: 0;
        }
        .diary-list { list-style: none; padding: 0; margin-top: 20px; }
        .diary-item {
            padding: 15px; border-bottom: 1px solid #1a1a1a; cursor: pointer;
            transition: 0.2s;
        }
        .diary-item:hover { background: #111; }
        .diary-item strong { display: block; color: #ddd; margin-bottom: 5px; }
        .diary-item .date { font-size: 0.75rem; color: #555; }
    </style>
</head>
<body>

    <div class="main-wrapper">
        <div class="banner-clip">
            <img src="banner.png" alt="banner">
        </div>
        
        <div class="container">
            <div class="status-box">
                <div class="status-text">ENERGY: 75% | DEPRESSION: 40%</div>
                <div class="btn-group">
                    <button class="smoke-btn" id="담배값">담배값</button>
                    <button class="toggle-diary-btn" onclick="toggleDiary()">일기 쓰기</button>
                </div>
            </div>

            <div class="diary-write-card" id="diaryCard">
                <input type="text" id="diaryTitle" placeholder="제목을 입력하세요">
                <textarea id="diaryContent" placeholder="기록하고 싶은 마음을 적으세요..."></textarea>
                <button class="save-btn" onclick="saveDiary()">마음 저장</button>
            </div>

            <div class="memo-content">억울하게 초대된 자들.
이런게 인생이란걸 알았다면
태어나는 것을 선택하지 않았을 자들.
나는 적어도 
그들이 "인생"이라는 것을 
사는 이들에게
죽는 것보다 고통스러운 삶을
살아가는 것이 마음이 쓰인다.
나또한 인간이기에
내가 정말 힘들었을 때 들었던
이 생각을 왠지 잊고 싶지 않다.
그리고 이 마음을 간직하며 실천하고 싶기에
여기에 나만의 공간에 적는다.</div>
        </div>
    </div>

    <div class="sidebar">
        <h3>일기장 목록</h3>
        <ul id="diaryList" class="diary-list"></ul>
    </div>

    <audio id="smokeSound" src="담배값.m4a"></audio>

    <script>
        // [기능 1] 담배값 소리 재생
        const btn = document.getElementById('담배값');
        const sound = document.getElementById('smokeSound');
        btn.onclick = function() {
            sound.currentTime = 0;
            sound.play();
        };

        // [기능 2] 일기 작성란 열기/닫기
        function toggleDiary() {
            const card = document.getElementById('diaryCard');
            if (card.style.display === "none" || card.style.display === "") {
                card.style.display = "block";
            } else {
                card.style.display = "none";
            }
        }

        // [기능 3] 일기 저장 및 불러오기
        const diaryListUl = document.getElementById('diaryList');

        window.onload = function() {
            displayDiaries();
        };

        function saveDiary() {
            const title = document.getElementById('diaryTitle');
            const content = document.getElementById('diaryContent');
            if (!title.value || !content.value) {
                alert("제목과 내용을 모두 적어주세요.");
                return;
            }

            const newEntry = {
                title: title.value,
                content: content.value,
                date: new Date().toLocaleString()
            };

            let diaries = JSON.parse(localStorage.getItem('myDiaries')) || [];
            diaries.unshift(newEntry);
            localStorage.setItem('myDiaries', JSON.stringify(diaries));

            title.value = '';
            content.value = '';
            displayDiaries();
            toggleDiary(); // 저장 후 다시 숨기기
        }

        function displayDiaries() {
            diaryListUl.innerHTML = '';
            let diaries = JSON.parse(localStorage.getItem('myDiaries')) || [];

            diaries.forEach((item) => {
                const li = document.createElement('li');
                li.className = 'diary-item';
                li.innerHTML = `
                    <strong>${item.title}</strong>
                    <span class="date">${item.date}</span>
                `;
                li.onclick = function() {
                    alert(`[${item.title}]\n\n${item.content}`);
                };
                diaryListUl.appendChild(li);
            });
        }
    </script>
</body>
</html>
